{% extends 'MsiAdminBundle:Page:layout.html.twig' %}

{% block css %}
<link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet">
<link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="{{ asset('bundles/msiadmin/vendor/chosen/chosen.css') }}">
<link rel="stylesheet" href="{{ asset('bundles/msiadmin/vendor/eternicode-bootstrap-datepicker/css/datepicker.css') }}">
<link rel="stylesheet" href="{{ asset('bundles/msiadmin/css/base.css') }}">
<link rel="stylesheet" href="{{ asset('bundles/msiadmin/css/admin.css') }}">
{{ parent() }}
{% endblock %}

{% block js %}
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.0/jquery-ui.min.js"></script>
<script src="{{ asset('bundles/msiadmin/vendor/hinclude/hinclude.js') }}"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
<script src="{{ asset('bundles/msiadmin/vendor/chosen/chosen.jquery.min.js') }}"></script>
<script src="{{ asset('bundles/msiadmin/vendor/eternicode-bootstrap-datepicker/js/bootstrap-datepicker.js') }}"></script>
<script src="{{ asset('bundles/msiadmin/vendor/eternicode-bootstrap-datepicker/js/locales/bootstrap-datepicker.fr.js') }}"></script>

<script src="{{ asset('bundles/msiadmin/js/admin.js') }}"></script>
<script>
$("select:not(.notchosen)").chosen({placeholder_text_single: ' ', placeholder_text_multiple: ''});
$('.datepicker').datepicker({
    format: 'dd-mm-yyyy',
    autoclose: true,
    language: '{{ app.request.locale }}'
});
</script>
{{ parent() }}
{% endblock %}

{% block body %}
{#<div id="loader" class="hide">
    <div id="loader-inner">
        <p><img src="/bundles/msiadmin/img/ajax-loader.gif" alt="0"></p>
        Please wait&hellip;
    </div>
</div>#}

<div class="navbar navbar-static-top navbar-default">
    <div class="container">
        <div class="navbar-header">
            <a class="navbar-brand" href="{{ path('msi_admin_dashboard') }}">{{ block('brand') }}</a>
        </div>
        {% if is_granted('ROLE_ADMIN') %}
            {#<div class="navbar-btn btn-group navbar-right">
                <a href="{{ path('fos_user_profile_show') }}" class="btn btn-default">{{ app.user.username }}</a>
                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" role="menu">
                    <li><a href="{{ path('fos_user_security_logout') }}">{{ 'sign_out'|trans }}</a></li>
                </ul>
            </div>#}
            <form class="navbar-form navbar-right" style="padding-right: 0;" method=GET action="{{ path('msi_admin_search_index') }}">
                <div class="form-group">
                    <input type="text" class="form-control" name=q>
                </div>
                <button type="submit" class="btn btn-default"><span class="icon-search icon-large"></span></button>
            </form>
            {{ knp_menu_render('MsiAdminBundle:MenuBuilder:adminMenu', {'allow_safe_labels': true, 'depth': 3, 'currentClass': 'active'}) }}
        {% endif %}
    </div>
</div>

<div class="container">
    {% block breadcrumb %}
        {% if admin is defined %}
            {% include 'MsiAdminBundle::breadcrumb.html.twig' with {'breadcrumb': admin.breadcrumb} %}
        {% endif %}
    {% endblock breadcrumb %}

    <h2>{{ block('title')|raw }}{{ block('title_suffix') }}</h2>

    <div class="row">
        {% set sidebar = block('sidebar') %}
        {% if sidebar %}
        <div class="col-md-3">
            <div id="sidebar">
            {{ msi_block_render('admin_sidebar_top', page) }}
            {{ sidebar|raw }}
            {{ msi_block_render('admin_sidebar_bottom', page) }}
            <div class="clearfix"></div>
            </div>
        </div>
        {% endif %}

        <div class="col-md-{% if sidebar %}9{% else %}12{% endif %}">
            <div id="content">
            {% if app.session.started %}
                {% for flashMessage in app.session.flashbag.get('success') %}
                    <div class="alert alert-success fade in">
                        <i class="icon-large icon-ok-sign"></i> <span>{{ flashMessage }}</span>
                    </div>
                {% endfor %}
            {% endif %}

            {% set actions = block('actions') %}
            {% if actions %}
            <div class="row">
                <div class="col-md-12">
                    {% include 'MsiAdminBundle::working_locale_btn.html.twig' %}
                    {{ actions|raw }}
                </div>
            </div>
            <hr>
            {% endif %}

            {{ msi_block_render('content_top', page) }}
            {{ block('page_content') }}
            {{ msi_block_render('content_bottom', page) }}
            <div class="clearfix"></div>
        </div>
        </div>
    </div>
</div>
{% endblock %}
